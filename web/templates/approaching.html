{% extends "base.html" %}

{% block title %}ã‚·ã‚°ãƒŠãƒ«æ¥è¿‘ä¸­ - Stock Strategy Analyzer{% endblock %}

{% block content %}
<section class="hero approaching-hero">
    <h1>ğŸ¯ ã‚·ã‚°ãƒŠãƒ«æ¥è¿‘ä¸­ã®éŠ˜æŸ„</h1>
    <p class="hero-sub">ç›´è¿‘1ã€œ3ãƒ¶æœˆã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€è¿‘æ—¥ä¸­ã«ã‚·ã‚°ãƒŠãƒ«ç™ºç”ŸãŒäºˆæƒ³ã•ã‚Œã‚‹éŠ˜æŸ„</p>

    {% if metadata %}
    <div class="stats-bar">
        <div class="stat">
            <span class="stat-value">{{ strategies|length }}</span>
            <span class="stat-label">æˆ¦ç•¥</span>
        </div>
        <div class="stat">
            <span class="stat-value">{{ metadata.last_updated[:10] if metadata.last_updated else '-' }}</span>
            <span class="stat-label">æœ€çµ‚æ›´æ–°</span>
        </div>
    </div>
    {% endif %}

    <div class="nav-links">
        <a href="/" class="nav-link">ğŸ“Š é©åˆåº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a href="/approaching" class="nav-link active">ğŸ¯ ã‚·ã‚°ãƒŠãƒ«æ¥è¿‘ä¸­</a>
    </div>
</section>

<section class="criteria-section">
    <details class="criteria-details">
        <summary class="criteria-summary">ğŸ“‹ ã‚·ã‚°ãƒŠãƒ«æ¥è¿‘ã®åˆ¤å®šåŸºæº–</summary>
        <div class="criteria-content">
            <p class="criteria-intro">å„æˆ¦ç•¥ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¡ä»¶ã«ã©ã‚Œã ã‘è¿‘ã¥ã„ã¦ã„ã‚‹ã‹ã‚’åˆ†æã—ã€æ®‹ã‚Šæ—¥æ•°ã‚’æ¨å®šã—ã¦ã„ã¾ã™ã€‚</p>
            <div class="criteria-grid">
                <div class="criteria-item">
                    <h4>ğŸ¯ æ¥è¿‘ã‚¹ã‚³ã‚¢</h4>
                    <ul>
                        <li><span class="ok">OK</span> 80%ä»¥ä¸Š: 1æ—¥ä»¥å†…</li>
                        <li><span class="ok">OK</span> 60%ã€œ80%: 3æ—¥ä»¥å†…</li>
                        <li><span class="mid">ä¸­</span> 40%ã€œ60%: 1é€±é–“ä»¥å†…</li>
                    </ul>
                </div>
                <div class="criteria-item">
                    <h4>ğŸ“… æ¨å®šæ—¥æ•°</h4>
                    <p>æ¡ä»¶ã®é”æˆåº¦åˆã„ã‹ã‚‰ã€ã‚·ã‚°ãƒŠãƒ«ç™ºç”Ÿã¾ã§ã®æ¨å®šæ—¥æ•°ã‚’ç®—å‡º</p>
                </div>
            </div>
        </div>
    </details>
</section>

<section class="strategies-section">
    <h2>æˆ¦ç•¥åˆ¥ æ¥è¿‘éŠ˜æŸ„</h2>

    {% if strategies %}
    <div class="strategy-grid">
        {% for strategy in strategies %}
        <a href="{{ url_for('approaching_strategy', name=strategy.name) }}" class="strategy-card approaching-card">
            <h3 class="strategy-name">{{ strategy.name }}</h3>

            {% if strategy.top3 %}
            <div class="top3-preview">
                {% for item in strategy.top3 %}
                <div class="preview-item approaching-item">
                    <span class="rank">#{{ item.rank }}</span>
                    <span class="code">{{ item.code }}</span>
                    <span class="name">{{ item.name }}</span>
                    <span class="days-badge">ç´„{{ item.estimated_days or '?' }}æ—¥å¾Œ</span>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-signals">
                <p>æ¥è¿‘ä¸­ã®éŠ˜æŸ„ã¯ã‚ã‚Šã¾ã›ã‚“</p>
            </div>
            {% endif %}

            <span class="card-arrow">â†’</span>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-data">
        <p>æ¥è¿‘ã‚·ã‚°ãƒŠãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <p>ãƒãƒƒãƒå‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚</p>
    </div>
    {% endif %}
</section>

<style>
    .approaching-hero {
        background: linear-gradient(135deg, #1a365d 0%, #2d4a73 100%);
    }

    .nav-links {
        margin-top: 1.5rem;
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .nav-link {
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        text-decoration: none;
        border-radius: 20px;
        transition: all 0.2s;
    }

    .nav-link:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .nav-link.active {
        background: rgba(255, 255, 255, 0.25);
        font-weight: bold;
    }

    .approaching-card {
        border-left: 4px solid #f59e0b;
    }

    .approaching-item .days-badge {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        padding: 0.2rem 0.5rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: bold;
        white-space: nowrap;
    }

    .no-signals {
        padding: 1rem;
        color: #6b7280;
        text-align: center;
    }

    .no-data {
        text-align: center;
        padding: 3rem;
        color: #6b7280;
    }
</style>
{% endblock %}